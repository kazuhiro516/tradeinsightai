# 📊 ダッシュボード機能 要件定義書

## 概要

ユーザーがログイン後に最初に表示される画面として、自身のトレード履歴に基づく基本分析データをダッシュボード形式で提供する。

## 目的

ユーザーが自身のトレードパフォーマンスを直感的かつ効率的に把握し、改善ポイントを素早く確認できるようにする。

## 対象データ

- XM Tradingからアップロードされたトレード履歴データ

## 基本分析項目（表示必須）

以下の項目を分析し、ダッシュボードに表示すること。

| 項目名                                   | 内容                    |
| ------------------------------------- | --------------------- |
| 総利益（Gross Profit）                     | 勝ちトレードの合計利益           |
| 総損失（Gross Loss）                       | 負けトレードの合計損失           |
| 純利益（Net Profit）                       | 総利益から総損失を引いた利益        |
| 取引回数（Total Trades）                    | 期間内の取引総数              |
| 勝率（Win Rate）                          | 勝ちトレード数 ÷ 全取引数        |
| プロフィットファクター（Profit Factor）            | 総利益 ÷ 総損失             |
| 平均利益・平均損失（Average Profit/Loss）        | 利益取引および損失取引それぞれの平均値   |
| 最大利益・最大損失（Largest Profit/Loss）        | 期間内における単一取引の最大利益と最大損失 |
| 最大連勝・連敗数（Max Consecutive Wins/Losses） | 期間内の最大連勝数と最大連敗数       |
| 最大ドローダウン（Maximal Drawdown）            | 資金ピーク時からの最大下落額と割合     |
| リスクリワード比率（Risk-Reward Ratio）          | 平均利益 ÷ 平均損失           |

## 表示方法

### 数値表示

各分析項目をカード形式で一覧表示する。

単位は円としてください。

例）

- 「総利益」: ¥315,477
- 「純利益」: ¥-80,389

### グラフ表示

以下のグラフを必須表示する。

- **利益推移グラフ**（折れ線グラフ）

  - 時系列での純利益の推移を表示

- **勝率推移グラフ**（棒グラフ）

  - 期間（月単位）ごとの勝率を表示

- **ドローダウン推移グラフ**（折れ線グラフ）

  - 時系列でのドローダウンの推移を表示

## 技術要件

- クライアント・サーバサイド共に **Next.js** を利用
- グラフ描画には **Recharts** を利用
- スタイリングは **Tailwind CSS** を採用
- データ取得はAPIルート（Next.js API Routes）経由で行う
- クライアントサイドで取得したデータを用いてリアクティブに描画する

## 画面遷移

- ログイン後、ルートURL (`/`) にアクセスすると本ダッシュボード画面を表示する

## 非機能要件

- 分析データは画面表示時に毎回最新のデータをサーバーサイドから取得し表示
- レスポンシブデザインで、モバイル・デスクトップ両方に対応
- 表示速度を最適化し、ストレスのないユーザー体験を提供

## エラー処理

- データ取得エラー時にはユーザーに分かりやすいメッセージを表示する（例：「データ取得に失敗しました。再試行してください。」）

